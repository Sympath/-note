### 判断用户状态

```
@guest
        @php $login = 0; @endphp
@else
        @php $login = 1; @endphp
@endguest

Number("@php echo $login; @endphp"),
未登录重定向且设置登录后返回页面
sessionStorage.setItem('recordUrl', '/activity/share-lessons');
window.location.href = "/register";
```

### 跳转app

```
 showDraw: function() {
                    if (!this.islogin) {
                        sessionStorage.setItem('recordUrl', '/activity/show-drawtb');
                        window.location.href = "/register";
                    } else if (this.from === 'app') {
                        let data = {
                            title: '活动title',
                            type: 4,
                            module: "sns_topics",
                            turn_ur: JSON.stringify({
                            	活动标签对象
                            })
                        }
                        if (window.webkit) {
                           window.webkit.messageHandles.CopyText.postMessage(JSON.stringify(data));
                        } else {
                            window.CopyText.postMessage(JSON.stringify(data))
                        }
                    } else {
                        this.show_mask = true;
                        this.show_toast = true;
                    }
                },
goAPP() {window.location.href = "https://a.app.qq.com/o/simple.jsp?pkgname=com.lanqb.teach"}
                },
```



### 注意点

- 存在localStorage中的数据必须是string

```
  submit() {
      let _self = this;
      _self.formItem.assignment_id = _self.assignment_id;
      var vidList = _self.vidList.filter(item=>item.title!=="");
      _self.vidList = vidList;
      for(let i = 0; i < _self.vidList.length; i++) {
        let index = i + 1;
        this.$set(_self.formItem.vid,"vid" + index, _self.vidList[i]);
      }
      console.log(_self.formItem);
      http.post(
        `/educational/v2/assignment/knowledge-point`,
        _self.formItem,
        response => {
          _self.$Notice.open({
            title: "子知识点保存成功"
          });
          _self.returnBack();
        },
        error => {
          _self.$Notice.error({
            title: error.response.data.message
          });
        }
      );
    },
    
     submit() {
      let _self = this;
      //去除素材库
      delete _self.formItem.materials;
      _self.formItem.vid = {};
      var vidList = _self.vidList.filter(item=>item.title!=="");
      _self.vidList = vidList;
      for(let i = 0; i < _self.vidList.length; i++) {
        let index = i + 1;
        this.$set(_self.formItem.vid,"vid" + index, _self.vidList[i]);
      }
      http.put(
        `/educational/v2/assignment/knowledge-point/` + _self.knowledge_id,
        _self.formItem,
        response => {
          _self.$Notice.open({
            title: "子知识点修改成功"
          });
          _self.returnBack();
        },
        error => {
          _self.$Notice.error({
            title: error.response.data.message
          });
        }
      );
    },
    
```

